# ボードゲーム「ジャッカル」Web版 仕様書

## 1. ゲーム概要

**コンセプト**: 自分のカードだけ見えない状態で、場の合計値を推理するブラフ＆心理戦ゲーム

| 項目 | 内容 |
|------|------|
| プレイ人数 | 2〜10人 |
| プレイ時間 | 15〜30分 |
| 対象年齢 | 10歳〜 |

---

## 2. カード構成

### 2.1 数字カード

| 数値 | 枚数 |
|------|------|
| -10 | 1枚 |
| -5 | 1枚 |
| 0 | 1枚 |
| 1 | 4枚 |
| 2 | 4枚 |
| 3 | 4枚 |
| 4 | 4枚 |
| 5 | 4枚 |
| 10 | 2枚 |
| 15 | 1枚 |
| 20 | 1枚 |

### 2.2 特殊カード

| カード | 効果 |
|--------|------|
| ×2 | 場の合計値を最後に2倍にする |
| MAX→0 | 場の最大数字を0に変える |
| ? | ジャッカル宣言時に山札から1枚引いてその数字に置き換わる |

### 2.3 スペシャルカード（上級ルール用）

6つの効果から1つ選択可能：

- パス（SAME）: 同じ数字を宣言して次の人へ
- 順番逆回り
- 相手の宣言変更
- その他

---

## 3. ゲームルール

### 3.1 セットアップ

1. 各プレイヤーにライフ3を付与
2. 山札をシャッフル
3. 各プレイヤーに1枚ずつカードを配布
4. **カードは自分に見えないように保持**（実際のゲームでは「おでこに当てる」）

### 3.2 ラウンド進行

```
┌─────────────────────────────────────┐
│           ラウンド開始               │
│  各プレイヤーに1枚カード配布         │
└───────────────┬─────────────────────┘
                ↓
┌─────────────────────────────────────┐
│      スタートプレイヤーが数字宣言    │
│  （場の合計値を超えない数字を推測）  │
└───────────────┬─────────────────────┘
                ↓
┌─────────────────────────────────────┐
│        次のプレイヤーの選択          │
│  A: より大きい数字を宣言             │
│  B: 「ジャッカル！」と宣言           │
└───────────────┬─────────────────────┘
                ↓
    ┌───────────┴───────────┐
    ↓                       ↓
┌─────────┐           ┌─────────────┐
│ Aを選択 │           │  Bを選択    │
│次の人へ │           │  判定処理   │
└────┬────┘           └──────┬──────┘
     │                       ↓
     │              ┌─────────────────┐
     │              │  全カード公開   │
     │              │  合計値を計算   │
     │              └────────┬────────┘
     │                       ↓
     │         ┌─────────────┴─────────────┐
     │         ↓                           ↓
     │  ┌─────────────────┐     ┌─────────────────┐
     │  │ 宣言 > 合計値   │     │ 宣言 ≦ 合計値  │
     │  │ → 宣言者の負け │     │ → ジャッカル   │
     │  └────────┬────────┘     │    宣言者の負け │
     │           │              └────────┬────────┘
     │           └──────────┬───────────┘
     │                      ↓
     └──────────────→ ┌─────────────────┐
                       │ 負けた人がライフ-1│
                       │ カード再配布      │
                       │ 次ラウンド開始    │
                       └─────────────────┘
```

### 3.3 ジャッカル判定

「ジャッカル！」が宣言されたら：

1. 全員のカードを公開
2. 合計値を計算（特殊カードの効果を適用）
3. 判定：
   - **直前の宣言 > 合計値** → 宣言した人の負け
   - **直前の宣言 ≦ 合計値** → ジャッカルを宣言した人の負け

### 3.4 特殊カードの処理順序

1. 「?」カードがある場合 → 山札から1枚引いて置き換え
2. 「MAX→0」カードがある場合 → 最大値を0に変更
3. 「×2」カードがある場合 → 合計値を2倍
4. 最終合計値を算出

### 3.5 勝敗条件

- ライフが0になったプレイヤーは脱落
- 最後まで生き残ったプレイヤーが勝利

---

## 4. Web版 実装要件

### 4.1 画面構成

#### ① ロビー画面

- ルーム作成/参加機能
- プレイヤー名入力
- プレイヤー人数表示（2〜10人）
- ゲーム開始ボタン
- ルールオプション設定

#### ② ゲーム画面

| 要素 | 説明 |
|------|------|
| 自分のカード | **裏面のみ表示**（見えない演出） |
| 他プレイヤーのカード | **表面を表示** |
| 現在の宣言数字 | 直前に宣言された数字 |
| ライフ表示 | 各プレイヤーの残りライフ |
| 行動ボタン | 「数字を宣言」「ジャッカル！」 |
| ターン表示 | 現在誰の番か |
| カード一覧 | 全カードの種類と枚数（参照用） |

#### ③ 判定画面

- 全カード公開アニメーション
- 合計値表示
- 勝敗判定結果
- 次ラウンドへ進むボタン

#### ④ ゲーム終了画面

- 最終順位
- 各プレイヤーの戦績
- リプレイ/ロビーに戻るボタン

### 4.2 通信要件（マルチプレイ対応）

| 機能 | 方式 |
|------|------|
| リアルタイム同期 | WebSocket推奨 |
| ルーム管理 | ルームID方式（URL共有で参加可能） |
| カード配布 | サーバー側で管理（不正防止） |
| ターン管理 | サーバー側で制御 |

### 4.3 重要な実装ポイント

#### カードの秘匿性（最重要）

```
【正しい実装】
サーバー → クライアントA: 他プレイヤー(B,C,D)のカード情報のみ送信
サーバー → クライアントB: 他プレイヤー(A,C,D)のカード情報のみ送信
...

【NG実装】
サーバー → クライアント: 全員のカード情報を送信（クライアント側で非表示）
→ 開発者ツールで見えてしまうため不正が可能
```

#### ジャッカル判定時

- サーバー側で合計値を計算
- 結果（全カード情報＋合計値＋勝敗）をまとめて全クライアントに送信

---

## 5. オプション機能

### 5.1 基本オプション

| 機能 | 説明 |
|------|------|
| スペシャルカード ON/OFF | 上級ルールの切り替え |
| 初期ライフ設定 | 2〜3で選択可能（大人数時は2推奨） |
| 制限時間設定 | 1ターンあたりの制限時間 |

### 5.2 拡張機能（あると良い）

| 機能 | 説明 |
|------|------|
| 観戦モード | 脱落者・第三者が観戦可能 |
| リプレイ機能 | ラウンド結果の振り返り |
| AI対戦 | ソロプレイ・人数補完用 |
| 戦績記録 | プレイヤーごとの勝率など |
| カスタムカード | カード構成を変更可能 |

---

## 6. 技術スタック（参考）

### フロントエンド

- React / Vue.js / Svelte など
- アニメーション: CSS / Framer Motion など

### バックエンド

- Node.js + Socket.io
- または Firebase Realtime Database / Firestore
- または Supabase Realtime

### ホスティング

- Vercel / Netlify（フロントエンド）
- Railway / Render / Fly.io（バックエンド）

---

## 7. 開発フェーズ案

### Phase 1: ローカル版プロトタイプ

- 1台のPC/スマホで遊べる版
- 画面を回して遊ぶ形式
- ゲームロジックの検証

### Phase 2: オンラインマルチプレイ

- ルーム作成・参加機能
- リアルタイム同期
- 基本的なUI

### Phase 3: 機能拡充

- スペシャルカード対応
- 観戦モード
- UI/UXの改善
- モバイル対応

### Phase 4: 追加機能

- AI対戦
- 戦績記録
- リプレイ機能

---

## 8. 参考リンク

- 元ゲーム: コヨーテ（ニューゲームズオーダー）
- BGG: https://boardgamegeek.com/boardgame/10002/coyote
