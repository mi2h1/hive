# Xing（バッティング） ルール仕様書

## 概要

宝石を奪い合う「バッティング」系ゲーム。全員が同時に「どの宝石を狙うか」を指差しで宣言し、誰とも被らなければ宝石を獲得できる。被ったら誰も取れない。

## 基本情報

| 項目 | 内容 |
|------|------|
| プレイ人数 | 2〜6人 |
| プレイ時間 | 約15分 |
| 対象年齢 | 6歳以上 |
| ジャンル | バッティング / 心理戦 |
| デザイナー | 篠原 良英 |
| メーカー | リゴレ |

## コンポーネント

### 宝石（計60個）

| 色 | 個数 | 得点 |
|----|------|------|
| 青 | 18個 | 1点 |
| 黄 | 18個 | 2点 |
| 赤 | 18個 | 3点 |
| 白 | 6個 | 特殊（後述） |

### その他

- 宝石台: 5枚
- 金庫: 6枚（各プレイヤー用）
- 宝石袋: 1袋

## セットアップ

### 人数別の設定

| 人数 | 宝石台 | 青 | 黄 | 赤 | 白 |
|------|--------|-----|-----|-----|-----|
| 2人 | 3枚 | 12個 | 12個 | 12個 | 6個 |
| 3人 | 2枚 | 9個 | 9個 | 9個 | 6個 |
| 4人 | 3枚 | 12個 | 12個 | 12個 | 6個 |
| 5人 | 4枚 | 15個 | 15個 | 15個 | 6個 |
| 6人 | 5枚 | 18個 | 18個 | 18個 | 6個 |

> **ポイント**: 宝石台の枚数 = プレイ人数 − 1（2人プレイ時を除く）

### 準備手順

1. 各プレイヤーの前に金庫を1枚配置
2. 場の中央に宝石台を規定枚数配置
3. 規定数の宝石を袋に入れる
4. 袋からランダムに宝石を取り出し、各宝石台に2個ずつ配置

## ゲームの流れ

### ラウンドの進行

各ラウンドは以下の3フェーズで構成される。

#### フェーズ1: アクション選択（同時）

全員が顔の前に指を1本立て、準備ができたら「せーの！」で一斉に以下のいずれかを実行。

| アクション | 対象 | 説明 |
|------------|------|------|
| **場を指差す** | 宝石台 | 場にある宝石台を指差す |
| **金庫を指差す** | 他人の金庫 | 他プレイヤーの金庫を指差す |
| **バリア** | 自分の金庫 | 両手で自分の金庫を覆う |

#### フェーズ2: アクション解決

選択したアクションに応じて宝石を移動。

##### 場の宝石台を指差した場合

- **被りなし**: 宝石台の全宝石を自分の金庫へ獲得
- **被りあり**: 何も起こらない（宝石はそのまま）

##### 他人の金庫を指差した場合

- **被りなし & 相手がバリアしていない**: 相手の金庫の全宝石を自分の金庫へ獲得
- **被りあり または 相手がバリア中**: 何も起こらない

##### 自分の金庫をバリアした場合

- 金庫にある宝石を「脇」へ移動（確定獲得、以後奪われない）
- **ペナルティ**: 次のラウンドは休み（アクション不可）
- 休み状態は宝石台の裏面（✕マーク）を自分の前に置いて表示

#### フェーズ3: 宝石の補充

1. **空の宝石台**: 袋から2個ずつ補充
2. **宝石が残っている宝石台**: 袋から1個ずつ補充
3. **最後の1個**: 補充者が好きな宝石台に配置可能
4. 休み状態のプレイヤーの宝石台を表に戻す

## ゲーム終了

**終了条件**: 袋から最後の宝石を取り出したラウンドの終了時

## 得点計算

### 色付き宝石の得点

| 色 | 1個あたり |
|----|-----------|
| 青 | 1点 |
| 黄 | 2点 |
| 赤 | 3点 |

### 3色セットボーナス

青・黄・赤を1個ずつ揃えると **+4点**（複数セット可）

> 例: 青2個、黄3個、赤2個 → 2セット分で +8点ボーナス

### 白の宝石（特殊）

個数の2乗が得点になる。

| 個数 | 1個 | 2個 | 3個 | 4個 | 5個 | 6個 |
|------|-----|-----|-----|-----|-----|-----|
| 得点 | 1点 | 4点 | 9点 | 16点 | 25点 | 36点 |

### 得点対象

- 金庫にある宝石
- バリアで脇へ移動した宝石

### 勝敗判定

- 合計得点が最も高いプレイヤーの勝利
- 同点の場合: 獲得した宝石の個数が多い方が勝利

## 2人用特殊ルール

### セットアップ

4人用と同じ設定を使用（宝石台3枚、青黄赤各12個、白6個）

### 特殊ルール

1. 各プレイヤーは **左手と右手で別々の金庫を担当**
2. 1ラウンドで両手それぞれ1回ずつアクション可能
3. 自分の別の手の金庫を指差すことも可能
4. バリアは担当する金庫にしかできない
5. **得点計算**: 左右の金庫のうち、**得点が低い方**が自分の最終得点

## 戦略のポイント

### 基本戦略

- **序盤**: 高得点の赤や白を積極的に狙う
- **中盤**: 3色セットを意識してバランスよく収集
- **終盤**: 金庫の宝石が増えたらバリアのタイミングを見極める

### 駆け引きのコツ

- 宝石台を指差す前に「〇〇を狙う」と宣言してブラフをかける
- 他プレイヤーの金庫に高得点宝石があれば狙い目
- バリアのタイミングは「狙われそうな時」だが、1ラウンド休みのリスクあり

---

## Webアプリ実装向けメモ

### 著作権対策

オリジナルタイトル使用不可のため、別名を検討（例: 「GEM CLASH」「宝石争奪戦」など）

### 技術的考慮点

1. **同時アクション制御**: Firebase Realtime DBで全員の「ready」状態を監視
2. **隠し情報**: 各プレイヤーの選択のみ（公開前）→ セキュリティルールで保護
3. **アニメーション**: 宝石の移動を視覚的にわかりやすく
4. **2人用UI**: 左右の金庫を1画面で操作できる設計が必要

### 状態管理

```
GameState {
  phase: 'waiting' | 'selecting' | 'revealing' | 'resolving' | 'replenishing' | 'ended'
  round: number
  bag: Gem[]
  platforms: Platform[]  // 宝石台
  players: {
    [playerId]: {
      vault: Gem[]       // 金庫
      secured: Gem[]     // バリア確定分
      action: Action | null
      isResting: boolean // バリア後の休み状態
    }
  }
}
```
